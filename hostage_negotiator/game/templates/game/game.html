{% extends 'base.html' %}

{% block content %}
<!-- Remove any content before the game-container div -->
<div class="game-container">
    <h1 class="game-title">Hostage Negotiation</h1>
    
    <div class="game-status">
        <div class="status-item">
            <span class="status-label">Tension:</span>
            <span class="status-value">{{ game_state.tension }}</span>
        </div>
        <div class="status-item">
            <span class="status-label">Trust:</span>
            <span class="status-value">{{ game_state.trust }}</span>
        </div>
        <div class="status-item">
            <span class="status-label">Hostages:</span>
            <span class="status-value">{{ hostages_remaining }} ({{ hostages_released }} released)</span>
        </div>
        <div class="status-item">
            <span class="status-label">Turn:</span>
            <span class="status-value">{{ game_state.turn }}/10</span>
        </div>
    </div>

    <div class="message-history">
        <h3>Conversation History</h3>
        <div class="message-container">
            {% for message in game_state.messages %}
                <div class="message {{ message.0 }}">
                    <span class="message-sender">
                        {% if message.0 == 'system' %}System
                        {% elif message.0 == 'suspect' %}Suspect
                        {% elif message.0 == 'player' %}You
                        {% endif %}
                    </span>
                    <span class="message-content">{{ message.1 }}</span>
                </div>
            {% endfor %}
        </div>
    </div>

    {% if not game_state.game_over %}
        <div class="response-form">
            <form method="post" action="{% url 'play' %}">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="btn btn-primary">Send Response</button>
            </form>
        </div>
    {% endif %}
</div>
{% endblock %}
